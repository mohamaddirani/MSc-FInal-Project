\doxysection{simple\+Test.\+py}
\hypertarget{simple_test_8py_source}{}\label{simple_test_8py_source}\index{RemoteApi/simpleTest.py@{RemoteApi/simpleTest.py}}
\mbox{\hyperlink{simple_test_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00001}\mbox{\hyperlink{namespacesimple_test}{00001}}\ \textcolor{comment}{\#\ Make\ sure\ to\ have\ the\ server\ side\ running\ in\ CoppeliaSim:\ }}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00002}00002\ \textcolor{comment}{\#\ in\ a\ child\ script\ of\ a\ CoppeliaSim\ scene,\ add\ following\ command}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00003}00003\ \textcolor{comment}{\#\ to\ be\ executed\ just\ once,\ at\ simulation\ start:}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00004}00004\ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00005}00005\ \textcolor{comment}{\#\ simRemoteApi.start(19999)}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00006}00006\ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00007}00007\ \textcolor{comment}{\#\ then\ start\ simulation,\ and\ run\ this\ program.}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00008}00008\ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00009}00009\ \textcolor{comment}{\#\ IMPORTANT:\ for\ each\ successful\ call\ to\ simxStart,\ there}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00010}00010\ \textcolor{comment}{\#\ should\ be\ a\ corresponding\ call\ to\ simxFinish\ at\ the\ end!}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00012}00012\ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00013}00013\ \ \ \ \ \textcolor{keyword}{import}\ sim}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00014}00014\ \textcolor{keywordflow}{except}:}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00015}00015\ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/'})}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00016}00016\ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'"{}sim.py"{}\ could\ not\ be\ imported.\ This\ means\ very\ probably\ that'})}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00017}00017\ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'either\ "{}sim.py"{}\ or\ the\ remoteApi\ library\ could\ not\ be\ found.'})}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00018}00018\ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'Make\ sure\ both\ are\ in\ the\ same\ folder\ as\ this\ file,'})}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00019}00019\ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'or\ appropriately\ adjust\ the\ file\ "{}sim.py"{}'})}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00020}00020\ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/'})}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00021}00021\ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00023}00023\ \textcolor{keyword}{import}\ time}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00025}00025\ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'Program\ started'})}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00026}00026\ \mbox{\hyperlink{namespacesim_aa15b32d604719a02a8fdaf117ee9362a}{sim.simxFinish}}(-\/1)\ \textcolor{comment}{\#\ just\ in\ case,\ close\ all\ opened\ connections}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00027}\mbox{\hyperlink{namespacesimple_test_a7fbdc617882c732e226741719b385004}{00027}}\ clientID=\mbox{\hyperlink{namespacesim_aa0278273e11a7dd23bb6924cbd8a128c}{sim.simxStart}}(\textcolor{stringliteral}{'127.0.0.1'},19999,\textcolor{keyword}{True},\textcolor{keyword}{True},5000,5)\ \textcolor{comment}{\#\ Connect\ to\ CoppeliaSim}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00028}00028\ \textcolor{keywordflow}{if}\ clientID!=-\/1:}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00029}00029\ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'Connected\ to\ remote\ API\ server'})}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00031}00031\ \ \ \ \ \textcolor{comment}{\#\ Now\ try\ to\ retrieve\ data\ in\ a\ blocking\ fashion\ (i.e.\ a\ service\ call):}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00032}\mbox{\hyperlink{namespacesimple_test_a48b24b453699cc691b62481b749e5586}{00032}}\ \ \ \ \ res,objs=\mbox{\hyperlink{namespacesim_ae9c0e25c8d1135724e014547410967cf}{sim.simxGetObjects}}(clientID,sim.sim\_handle\_all,sim.simx\_opmode\_blocking)}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00033}00033\ \ \ \ \ \textcolor{keywordflow}{if}\ res==sim.simx\_return\_ok:}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00034}00034\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'Number\ of\ objects\ in\ the\ scene:\ '},len(objs))}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00035}00035\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00036}00036\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'Remote\ API\ function\ call\ returned\ with\ error\ code:\ '},res)}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00038}00038\ \ \ \ \ time.sleep(2)}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00040}00040\ \ \ \ \ \textcolor{comment}{\#\ Now\ retrieve\ streaming\ data\ (i.e.\ in\ a\ non-\/blocking\ fashion):}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00041}\mbox{\hyperlink{namespacesimple_test_afcf094308024607ef58a8ed0ea2c38d6}{00041}}\ \ \ \ \ startTime=time.time()}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00042}00042\ \ \ \ \ \mbox{\hyperlink{namespacesim_a394f04dfa60b26c294fb4d1f92b2cb3e}{sim.simxGetIntegerParameter}}(clientID,sim.sim\_intparam\_mouse\_x,sim.simx\_opmode\_streaming)\ \textcolor{comment}{\#\ Initialize\ streaming}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00043}00043\ \ \ \ \ \textcolor{keywordflow}{while}\ time.time()-\/startTime\ <\ 5:}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00044}\mbox{\hyperlink{namespacesimple_test_a655cb472a6c0ef70444a0d6ecdeba71f}{00044}}\ \ \ \ \ \ \ \ \ returnCode,data=\mbox{\hyperlink{namespacesim_a394f04dfa60b26c294fb4d1f92b2cb3e}{sim.simxGetIntegerParameter}}(clientID,sim.sim\_intparam\_mouse\_x,sim.simx\_opmode\_buffer)\ \textcolor{comment}{\#\ Try\ to\ retrieve\ the\ streamed\ data}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00045}00045\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ returnCode==sim.simx\_return\_ok:\ \textcolor{comment}{\#\ After\ initialization\ of\ streaming,\ it\ will\ take\ a\ few\ ms\ before\ the\ first\ value\ arrives,\ so\ check\ the\ return\ code}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00046}00046\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'Mouse\ position\ x:\ '},data)\ \textcolor{comment}{\#\ Mouse\ position\ x\ is\ actualized\ when\ the\ cursor\ is\ over\ CoppeliaSim's\ window}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00047}00047\ \ \ \ \ \ \ \ \ time.sleep(0.005)}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00048}00048\ }
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00049}00049\ \ \ \ \ \textcolor{comment}{\#\ Now\ send\ some\ data\ to\ CoppeliaSim\ in\ a\ non-\/blocking\ fashion:}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00050}00050\ \ \ \ \ \mbox{\hyperlink{namespacesim_ac3938b5f0f0924ca5577a5613ca916ae}{sim.simxAddStatusbarMessage}}(clientID,\textcolor{stringliteral}{'Hello\ CoppeliaSim!'},sim.simx\_opmode\_oneshot)}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00052}00052\ \ \ \ \ \textcolor{comment}{\#\ Before\ closing\ the\ connection\ to\ CoppeliaSim,\ make\ sure\ that\ the\ last\ command\ sent\ out\ had\ time\ to\ arrive.\ You\ can\ guarantee\ this\ with\ (for\ example):}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00053}00053\ \ \ \ \ \mbox{\hyperlink{namespacesim_a3b45208b35f3ebabc0e02238ca2ae9c8}{sim.simxGetPingTime}}(clientID)}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00055}00055\ \ \ \ \ \textcolor{comment}{\#\ Now\ close\ the\ connection\ to\ CoppeliaSim:}}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00056}00056\ \ \ \ \ \mbox{\hyperlink{namespacesim_aa15b32d604719a02a8fdaf117ee9362a}{sim.simxFinish}}(clientID)}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00057}00057\ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00058}00058\ \ \ \ \ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'Failed\ connecting\ to\ remote\ API\ server'})}
\DoxyCodeLine{\Hypertarget{simple_test_8py_source_l00059}00059\ \textcolor{keywordflow}{print}\ (\textcolor{stringliteral}{'Program\ ended'})}

\end{DoxyCode}
