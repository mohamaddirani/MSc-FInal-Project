\doxysection{depth\+\_\+image\+\_\+encoding Namespace Reference}
\hypertarget{namespacedepth__image__encoding}{}\label{namespacedepth__image__encoding}\index{depth\_image\_encoding@{depth\_image\_encoding}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacedepth__image__encoding_a86ce2d5adcb9ac600268718adb6bb319}{Clip\+Float\+Values}} (float\+\_\+array, min\+\_\+value, max\+\_\+value)
\item 
\mbox{\hyperlink{namespacedepth__image__encoding_a7976898de2f3f52ffa27cc15c45f3964}{Float\+Array\+To\+Rgb\+Image}} (float\+\_\+array, scale\+\_\+factor=\mbox{\hyperlink{namespacedepth__image__encoding_abe98394e3f326ea2338f7c63f193c037}{DEFAULT\+\_\+\+RGB\+\_\+\+SCALE\+\_\+\+FACTOR}}, drop\+\_\+blue=False)
\item 
\mbox{\hyperlink{namespacedepth__image__encoding_ac583337bc97ff5fc4fcf26cd7eb359ed}{Float\+Array\+To\+Gray\+Image}} (float\+\_\+array, scale\+\_\+factor=None, image\+\_\+dtype=np.\+uint8)
\item 
\mbox{\hyperlink{namespacedepth__image__encoding_a20727a593b4634da835c6ae445350a8f}{Image\+To\+Float\+Array}} (image, scale\+\_\+factor=None)
\item 
\mbox{\hyperlink{namespacedepth__image__encoding_a2eca0f0041ab21c57f69bbca4de64cf5}{Float\+Array\+To\+Raw\+RGB}} (im, min\+\_\+value=0.\+0, max\+\_\+value=1.\+0)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
float \mbox{\hyperlink{namespacedepth__image__encoding_abe98394e3f326ea2338f7c63f193c037}{DEFAULT\+\_\+\+RGB\+\_\+\+SCALE\+\_\+\+FACTOR}} = 256000.\+0
\item 
dict \mbox{\hyperlink{namespacedepth__image__encoding_aa85f57b950605ff84bc5ba6c820c8430}{DEFAULT\+\_\+\+GRAY\+\_\+\+SCALE\+\_\+\+FACTOR}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Creates an image from a numpy array of floating point depth data.

For details about the encoding see:
https://sites.google.com/site/brainrobotdata/home/depth-image-encoding

Examples:

  depth_array is a 2D numpy array of floating point depth data in meters.

  depth_rgb = FloatArrayToRgbImage(depth_array)
  depth_rgb is a PIL Image object containing the same data as 24-bit
  integers encoded in the RGB bytes.
  depth_rgb.save('image_file.png') - to save to a file.

  depth_array2 = ImageToFloatArray(depth_rgb)
  depth_array2 is a 2D numpy array containing the same data as
  depth_array up to the precision of the RGB image (1/256 mm).

  depth_gray = FloatArrayToGrayImage(depth_array)
  depth_gray is a PIL Image object containing the same data rounded to
  8-bit integers.
  depth_gray.save('image_file.jpg', quality=95) - to save to a file.

  depth_array3 = ImageToFloatArray(depth_gray)
  depth_array3 is a 2D numpy array containing the same data as
  depth_array up to the precision of the grayscale image (1 cm).

The image conversions first scale and round the values and then pack
them into the desired type in a numpy array before converting the
array to a PIL Image object.  The Image can be saved in any format.
We are using PNG for RGB and high quality JPEG for grayscale images.

You can use different numeric types (e.g. np.uint16, np.int32), but
not all combinations of numeric type and image format are supported by
PIL or standard image viewers.
\end{DoxyVerb}
 

\label{doc-func-members}
\Hypertarget{namespacedepth__image__encoding_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{namespacedepth__image__encoding_a86ce2d5adcb9ac600268718adb6bb319}\index{depth\_image\_encoding@{depth\_image\_encoding}!ClipFloatValues@{ClipFloatValues}}
\index{ClipFloatValues@{ClipFloatValues}!depth\_image\_encoding@{depth\_image\_encoding}}
\doxysubsubsection{\texorpdfstring{ClipFloatValues()}{ClipFloatValues()}}
{\footnotesize\ttfamily \label{namespacedepth__image__encoding_a86ce2d5adcb9ac600268718adb6bb319} 
depth\+\_\+image\+\_\+encoding.\+Clip\+Float\+Values (\begin{DoxyParamCaption}\item[{}]{float\+\_\+array}{, }\item[{}]{min\+\_\+value}{, }\item[{}]{max\+\_\+value}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Clips values to the range [min_value, max_value].

First checks if any values are out of range and prints a message.
Then clips all values to the given range.

Args:
  float_array: 2D array of floating point values to be clipped.
  min_value: Minimum value of clip range.
  max_value: Maximum value of clip range.

Returns:
  The clipped array.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{depth__image__encoding_8py_source_l00045}{45}} of file \mbox{\hyperlink{depth__image__encoding_8py_source}{depth\+\_\+image\+\_\+encoding.\+py}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacedepth__image__encoding_a86ce2d5adcb9ac600268718adb6bb319_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacedepth__image__encoding_ac583337bc97ff5fc4fcf26cd7eb359ed}\index{depth\_image\_encoding@{depth\_image\_encoding}!FloatArrayToGrayImage@{FloatArrayToGrayImage}}
\index{FloatArrayToGrayImage@{FloatArrayToGrayImage}!depth\_image\_encoding@{depth\_image\_encoding}}
\doxysubsubsection{\texorpdfstring{FloatArrayToGrayImage()}{FloatArrayToGrayImage()}}
{\footnotesize\ttfamily \label{namespacedepth__image__encoding_ac583337bc97ff5fc4fcf26cd7eb359ed} 
depth\+\_\+image\+\_\+encoding.\+Float\+Array\+To\+Gray\+Image (\begin{DoxyParamCaption}\item[{}]{float\+\_\+array}{, }\item[{}]{scale\+\_\+factor}{ = {\ttfamily None}, }\item[{}]{image\+\_\+dtype}{ = {\ttfamily np.uint8}}\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert a floating point array of values to an RGB image.

Convert floating point values to a fixed point representation with
the given bit depth.

The precision of the depth image with default scale_factor is:
  uint8: 1cm, with a range of [0, 2.55m]
  uint16: 1mm, with a range of [0, 65.5m]
  int32: 1/256mm, with a range of [0, 8388m]

Right now, PIL turns uint16 images into a very strange format and
does not decode int32 images properly.  Only uint8 works correctly.

Args:
  float_array: Input array of floating point depth values in meters.
  scale_factor: Scale value applied to all float values.
  image_dtype: Image datatype, which controls the bit depth of the grayscale
    image.

Returns:
  Grayscale PIL Image object representing depth values.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{depth__image__encoding_8py_source_l00128}{128}} of file \mbox{\hyperlink{depth__image__encoding_8py_source}{depth\+\_\+image\+\_\+encoding.\+py}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacedepth__image__encoding_ac583337bc97ff5fc4fcf26cd7eb359ed_cgraph}
\end{center}
\end{figure}
\Hypertarget{namespacedepth__image__encoding_a2eca0f0041ab21c57f69bbca4de64cf5}\index{depth\_image\_encoding@{depth\_image\_encoding}!FloatArrayToRawRGB@{FloatArrayToRawRGB}}
\index{FloatArrayToRawRGB@{FloatArrayToRawRGB}!depth\_image\_encoding@{depth\_image\_encoding}}
\doxysubsubsection{\texorpdfstring{FloatArrayToRawRGB()}{FloatArrayToRawRGB()}}
{\footnotesize\ttfamily \label{namespacedepth__image__encoding_a2eca0f0041ab21c57f69bbca4de64cf5} 
depth\+\_\+image\+\_\+encoding.\+Float\+Array\+To\+Raw\+RGB (\begin{DoxyParamCaption}\item[{}]{im}{, }\item[{}]{min\+\_\+value}{ = {\ttfamily 0.0}, }\item[{}]{max\+\_\+value}{ = {\ttfamily 1.0}}\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert a grayscale image to rgb, no encoding.

For proper display try matplotlib's rendering/conversion instead of this version.
Please be aware that this does not incorporate a proper color transform.
http://pillow.readthedocs.io/en/3.4.x/reference/Image.html#PIL.Image.Image.convert
https://en.wikipedia.org/wiki/Rec._601
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{depth__image__encoding_8py_source_l00218}{218}} of file \mbox{\hyperlink{depth__image__encoding_8py_source}{depth\+\_\+image\+\_\+encoding.\+py}}.

\Hypertarget{namespacedepth__image__encoding_a7976898de2f3f52ffa27cc15c45f3964}\index{depth\_image\_encoding@{depth\_image\_encoding}!FloatArrayToRgbImage@{FloatArrayToRgbImage}}
\index{FloatArrayToRgbImage@{FloatArrayToRgbImage}!depth\_image\_encoding@{depth\_image\_encoding}}
\doxysubsubsection{\texorpdfstring{FloatArrayToRgbImage()}{FloatArrayToRgbImage()}}
{\footnotesize\ttfamily \label{namespacedepth__image__encoding_a7976898de2f3f52ffa27cc15c45f3964} 
depth\+\_\+image\+\_\+encoding.\+Float\+Array\+To\+Rgb\+Image (\begin{DoxyParamCaption}\item[{}]{float\+\_\+array}{, }\item[{}]{scale\+\_\+factor}{ = {\ttfamily \mbox{\hyperlink{namespacedepth__image__encoding_abe98394e3f326ea2338f7c63f193c037}{DEFAULT\+\_\+\+RGB\+\_\+\+SCALE\+\_\+\+FACTOR}}}, }\item[{}]{drop\+\_\+blue}{ = {\ttfamily False}}\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert a floating point array of values to an RGB image.

Convert floating point values to a fixed point representation where
the RGB bytes represent a 24-bit integer.
R is the high order byte.
B is the low order byte.
The precision of the depth image is 1/256 mm.

Floating point values are scaled so that the integer values cover
the representable range of depths.

This image representation should only use lossless compression.

Args:
  float_array: Input array of floating point depth values in meters.
  scale_factor: Scale value applied to all float values.
  drop_blue: Zero out the blue channel to improve compression, results in 1mm
    precision depth values.

Returns:
  24-bit RGB PIL Image object representing depth values.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{depth__image__encoding_8py_source_l00070}{70}} of file \mbox{\hyperlink{depth__image__encoding_8py_source}{depth\+\_\+image\+\_\+encoding.\+py}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacedepth__image__encoding_a7976898de2f3f52ffa27cc15c45f3964_cgraph}
\end{center}
\end{figure}
\Hypertarget{namespacedepth__image__encoding_a20727a593b4634da835c6ae445350a8f}\index{depth\_image\_encoding@{depth\_image\_encoding}!ImageToFloatArray@{ImageToFloatArray}}
\index{ImageToFloatArray@{ImageToFloatArray}!depth\_image\_encoding@{depth\_image\_encoding}}
\doxysubsubsection{\texorpdfstring{ImageToFloatArray()}{ImageToFloatArray()}}
{\footnotesize\ttfamily \label{namespacedepth__image__encoding_a20727a593b4634da835c6ae445350a8f} 
depth\+\_\+image\+\_\+encoding.\+Image\+To\+Float\+Array (\begin{DoxyParamCaption}\item[{}]{image}{, }\item[{}]{scale\+\_\+factor}{ = {\ttfamily None}}\end{DoxyParamCaption})}

\begin{DoxyVerb}Recovers the depth values from an image.

Reverses the depth to image conversion performed by FloatArrayToRgbImage or
FloatArrayToGrayImage.

The image is treated as an array of fixed point depth values.  Each
value is converted to float and scaled by the inverse of the factor
that was used to generate the Image object from depth values.  If
scale_factor is specified, it should be the same value that was
specified in the original conversion.

The result of this function should be equal to the original input
within the precision of the conversion.

For details see https://sites.google.com/site/brainrobotdata/home/depth-image-encoding.

Args:
  image: Depth image output of FloatArrayTo[Format]Image.
  scale_factor: Fixed point scale factor.

Returns:
  A 2D floating point numpy array representing a depth image.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{depth__image__encoding_8py_source_l00174}{174}} of file \mbox{\hyperlink{depth__image__encoding_8py_source}{depth\+\_\+image\+\_\+encoding.\+py}}.



\label{doc-var-members}
\Hypertarget{namespacedepth__image__encoding_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{namespacedepth__image__encoding_aa85f57b950605ff84bc5ba6c820c8430}\index{depth\_image\_encoding@{depth\_image\_encoding}!DEFAULT\_GRAY\_SCALE\_FACTOR@{DEFAULT\_GRAY\_SCALE\_FACTOR}}
\index{DEFAULT\_GRAY\_SCALE\_FACTOR@{DEFAULT\_GRAY\_SCALE\_FACTOR}!depth\_image\_encoding@{depth\_image\_encoding}}
\doxysubsubsection{\texorpdfstring{DEFAULT\_GRAY\_SCALE\_FACTOR}{DEFAULT\_GRAY\_SCALE\_FACTOR}}
{\footnotesize\ttfamily \label{namespacedepth__image__encoding_aa85f57b950605ff84bc5ba6c820c8430} 
dict depth\+\_\+image\+\_\+encoding.\+DEFAULT\+\_\+\+GRAY\+\_\+\+SCALE\+\_\+\+FACTOR}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ =\ \ \{np.uint8:\ 100.0,}
\DoxyCodeLine{00002\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.uint16:\ 1000.0,}
\DoxyCodeLine{00003\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ np.int32:\ DEFAULT\_RGB\_SCALE\_FACTOR\}}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{depth__image__encoding_8py_source_l00123}{123}} of file \mbox{\hyperlink{depth__image__encoding_8py_source}{depth\+\_\+image\+\_\+encoding.\+py}}.

\Hypertarget{namespacedepth__image__encoding_abe98394e3f326ea2338f7c63f193c037}\index{depth\_image\_encoding@{depth\_image\_encoding}!DEFAULT\_RGB\_SCALE\_FACTOR@{DEFAULT\_RGB\_SCALE\_FACTOR}}
\index{DEFAULT\_RGB\_SCALE\_FACTOR@{DEFAULT\_RGB\_SCALE\_FACTOR}!depth\_image\_encoding@{depth\_image\_encoding}}
\doxysubsubsection{\texorpdfstring{DEFAULT\_RGB\_SCALE\_FACTOR}{DEFAULT\_RGB\_SCALE\_FACTOR}}
{\footnotesize\ttfamily \label{namespacedepth__image__encoding_abe98394e3f326ea2338f7c63f193c037} 
float depth\+\_\+image\+\_\+encoding.\+DEFAULT\+\_\+\+RGB\+\_\+\+SCALE\+\_\+\+FACTOR = 256000.\+0}



Definition at line \mbox{\hyperlink{depth__image__encoding_8py_source_l00067}{67}} of file \mbox{\hyperlink{depth__image__encoding_8py_source}{depth\+\_\+image\+\_\+encoding.\+py}}.

